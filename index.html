<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘å€‘çš„åœ‹éš›å‰µæ„å¸‚é›†ï¼šå­¸ç¿’è­·ç…§</title>
    <!-- æ­¥é©Ÿ 1: å¼•å…¥ html2pdf.js å‡½å¼åº« -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        /* --- å…¨å±€æ¨£å¼ (æ¨£å¼ç¶­æŒä¸è®Š) --- */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft JhengHei", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f0f4f8;
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }
        .passport-container {
            max-width: 900px;
            margin: 20px auto;
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow: hidden;
            border: 1px solid #ddd;
        }
        .passport-header {
            background-color: #4a69bd;
            color: white;
            padding: 20px 30px;
            text-align: center;
        }
        .passport-header h1 { margin: 0; font-size: 2em; letter-spacing: 2px; }
        .passport-header p { margin: 5px 0 0; opacity: 0.9; }
        .tab-nav { display: flex; background-color: #e2e8f0; border-bottom: 1px solid #cbd5e0; }
        .tab-button {
            flex: 1; padding: 15px 10px; border: none; background-color: transparent;
            cursor: pointer; font-size: 1em; font-weight: 600; color: #4a5568;
            transition: background-color 0.3s, color 0.3s; border-bottom: 3px solid transparent;
        }
        .tab-button:hover { background-color: #cbd5e0; }
        .tab-button.active { color: #4a69bd; border-bottom: 3px solid #4a69bd; background-color: #fff; }
        .tab-content { padding: 30px; }
        .tab-pane { display: none; }
        .tab-pane.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .task-card {
            background-color: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px;
            padding: 20px; margin-bottom: 25px;
        }
        .task-card h2 { margin-top: 0; color: #1e3a8a; border-bottom: 2px solid #e2e8f0; padding-bottom: 10px; }
        label { display: flex; align-items: center; font-weight: 600; margin-bottom: 8px; }
        label svg { width: 1.3em; height: 1.3em; margin-right: 10px; fill: #4a69bd; flex-shrink: 0; }
        input[type="text"], textarea {
            width: 100%; padding: 10px; border: 1px solid #cbd5e0; border-radius: 6px;
            font-size: 1em; box-sizing: border-box; margin-bottom: 15px; background-color: #fff;
        }
        textarea { resize: vertical; min-height: 100px; }
        input[type="text"]:focus, textarea:focus { outline: none; border-color: #4a69bd; box-shadow: 0 0 0 2px rgba(74, 105, 189, 0.2); }
        .grid-container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .action-button {
            display: block; width: 100%; padding: 15px; background-color: #3c5aa6;
            color: white; border: none; border-radius: 8px; font-size: 1.1em;
            font-weight: bold; cursor: pointer; text-align: center; margin-top: 20px;
            transition: background-color 0.3s;
        }
        .action-button:hover { background-color: #2d4373; }
        .action-button:disabled { background-color: #a0aec0; cursor: not-allowed; }
        
        /* ç‚ºäº†PDFç”Ÿæˆï¼Œæš«æ™‚é¡¯ç¤ºæ‰€æœ‰å…§å®¹çš„æ¨£å¼ */
        .show-all-for-pdf .tab-pane {
            display: block !important;
            animation: none !important;
        }
        .show-all-for-pdf .tab-nav {
            display: none;
        }

        @media (max-width: 600px) {
            body { padding: 10px; }
            .tab-nav { flex-direction: column; }
            .tab-button { border-bottom: 1px solid #cbd5e0; }
            .tab-button.active { border-bottom: 3px solid #4a69bd; }
            .grid-container { grid-template-columns: 1fr; }
            .passport-header h1 { font-size: 1.5em; }
            .tab-content { padding: 20px; }
        }
    </style>
</head>
<body>

    <div class="passport-container" id="passport-content">
        <header class="passport-header">
            <h1>æˆ‘å€‘çš„åœ‹éš›å‰µæ„å¸‚é›†</h1>
            <p>å­¸ç¿’è­·ç…§ Learning Passport</p>
        </header>

        <nav class="tab-nav">
            <button class="tab-button active" data-tab="tab1">â‘  è­·ç…§é¦–é </button>
            <button class="tab-button" data-tab="tab2">â‘¡ æ¢ç´¢è‡ºç£å¯¶è—</button>
            <button class="tab-button" data-tab="tab3">â‘¢ è¨­è¨ˆä¸–ç•Œæ”¤ä½</button>
            <button class="tab-button" data-tab="tab4">â‘£ å¸‚é›†æ—¥åæ€</button>
        </nav>

        <main class="tab-content">
            <!-- Tab 1: è­·ç…§é¦–é  -->
            <div id="tab1" class="tab-pane active">
                <div class="task-card">
                    <h2>è­·ç…§æŒæœ‰äººè³‡è¨Š / Passport Holder Information</h2>
                    <div class="grid-container">
                        <div>
                            <label for="student-name">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                                å§“å / Name
                            </label>
                            <input type="text" id="student-name" placeholder="è«‹è¼¸å…¥ä½ çš„å§“å">
                        </div>
                        <div>
                            <label for="group-members">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
                                å°çµ„æˆå“¡ / Group Members
                            </label>
                            <input type="text" id="group-members" placeholder="è«‹è¼¸å…¥æ‰€æœ‰çµ„å“¡çš„å§“å">
                        </div>
                    </div>
                </div>
                 <div class="task-card">
                    <h2>æ—…ç¨‹ä»»å‹™èªªæ˜ / Journey Tasks Guide</h2>
                    <p>æ­¡è¿ä¾†åˆ°ã€Œæˆ‘å€‘çš„åœ‹éš›å‰µæ„å¸‚é›†ã€ï¼é€™æœ¬è­·ç…§å°‡è¨˜éŒ„ä½ å¾æ¢ç´¢å®¶é„‰ã€èªè­˜ä¸–ç•Œï¼Œåˆ°è¦ªæ‰‹æ‰“é€ å‰µæ„æ”¤ä½çš„å®Œæ•´æ—…ç¨‹ã€‚</p>
                    <p>è«‹è·Ÿéš¨é ç±¤çš„æŒ‡å¼•ï¼Œèˆ‡ä½ çš„çµ„å“¡å€‘åŒå¿ƒå”åŠ›ï¼Œå®Œæˆæ¯ä¸€å€‹éšæ®µçš„æŒ‘æˆ°ã€‚æº–å‚™å¥½å°±å¾ã€Œâ‘¡ æ¢ç´¢è‡ºç£å¯¶è—ã€é–‹å§‹ä½ çš„æ—…ç¨‹å§ï¼</p>
                    <p>Welcome to <strong>Our International Creative Market</strong>! This Learning Passport will help you record your entire journey â€” from exploring your hometown and learning about the world, all the way to creating your very own creative booth!</p>
                    <p>All you have to do is follow the tab instructions, and you and your friends can work together to complete each challenge. Are you ready? Then letâ€™s start your journey from <strong>â‘¡ Explore Taiwanâ€™s Treasures</strong>!</p>
                </div>
            </div>

            <!-- Tab 2: æ¢ç´¢è‡ºç£å¯¶è— -->
            <div id="tab2" class="tab-pane">
                <div class="task-card">
                    <h2>Step 1ï¼šè‡ºç£å¥½ç‰©è…¦åŠ›æ¿€ç›ª</h2>
                    <label for="taiwan-ideas">
                        å¦‚æœæˆ‘å€‘è¦å‘ä¸–ç•Œä»‹ç´¹è‡ºç£ï¼Œä½ æœƒæ‹¿å‡ºä»€éº¼ã€Œå¯¶è—ã€ï¼Ÿ(ä¾‹å¦‚ï¼šçç å¥¶èŒ¶ã€è—ç™½æ‹–ã€å°ç± åŒ…ã€å®¢å®¶èŠ±å¸ƒ...)
                    </label>
                    <textarea id="taiwan-ideas" placeholder="è«‹ç›¡æƒ…å¯«ä¸‹æ‰€æœ‰æƒ³åˆ°çš„è‡ºç£ç‰¹è‰²ç‰©å“..."></textarea>
                </div>
                <div class="task-card">
                    <h2>Step 2ï¼šé¸å®šæˆ‘å€‘çš„ã€Œè‡ºç£ä¹‹å…‰ã€</h2>
                    <label for="selected-item">
                        ç¶“éå°çµ„è¨è«–ï¼Œæˆ‘å€‘æ±ºå®šæ·±å…¥ç ”ç©¶çš„ã€Œè‡ºç£å¥½ç‰©ã€æ˜¯ï¼š
                    </label>
                    <input type="text" id="selected-item" placeholder="è«‹å¡«å¯«æœ€çµ‚é¸å®šçš„ç”¢å“åç¨±">
                    
                    <label for="item-story">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V6h5.17l2 2H20v10zM12 10H6v2h6v-2zm4 4h-4v2h4v-2z"/></svg>
                        é—œæ–¼é€™å€‹å¯¶è—çš„æ•…äº‹ï¼š(å®ƒçš„ç”±ä¾†ã€æ–‡åŒ–æ„ç¾©ã€ç‰¹æ®Šä¹‹è™•)
                    </label>
                    <textarea id="item-story" placeholder="è«‹åˆ©ç”¨å¹³æ¿æˆ–åœ–æ›¸ï¼ŒæŸ¥è©¢ä¸¦è¨˜éŒ„ä¸‹å®ƒçš„æ•…äº‹..."></textarea>
                </div>
            </div>

            <!-- Tab 3: è¨­è¨ˆä¸–ç•Œæ”¤ä½ -->
            <div id="tab3" class="tab-pane">
                <div class="task-card">
                    <h2>Step 1ï¼šæˆ‘å€‘çš„åœ‹å®¶æ”¤ä½</h2>
                     <div class="grid-container">
                        <div>
                            <label for="country-name">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6z"/></svg>
                                æˆ‘å€‘è² è²¬çš„åœ‹å®¶
                            </label>
                            <input type="text" id="country-name" placeholder="è«‹å¡«å¯«æŠ½ç±¤æˆ–åˆ†é…åˆ°çš„åœ‹å®¶">
                        </div>
                        <div>
                            <label for="stall-name">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 4H4v2h16V4zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6h1zm-9 4H6v-4h6v4z"/></svg>
                                æˆ‘å€‘çš„æ”¤ä½åç¨±
                            </label>
                            <input type="text" id="stall-name" placeholder="ç™¼æ®å‰µæ„ï¼Œç‚ºæ”¤ä½å–å€‹éŸ¿äº®çš„åå­—ï¼">
                        </div>
                    </div>
                </div>
                <div class="task-card">
                    <h2>Step 2ï¼šç”¢å“ç ”ç©¶èˆ‡è¨­è¨ˆ</h2>
                    <label for="country-product">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35C11.96 2.54 11.05 2 10 2c-1.66 0-3 1.34-3 3 0 .35.07.69.18 1H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2L21 8c0-1.1-.9-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 16H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-2.76h.01L14.38 12 16 10.83 13.92 8H19v7z"/></svg>
                        æˆ‘å€‘è¦è²©å”®çš„ã€Œå‰µæ„ç”¢å“ã€æ˜¯ä»€éº¼ï¼Ÿ(ä¾‹å¦‚ï¼šæ—¥æœ¬çš„å¾¡å®ˆã€è·è˜­çš„æœ¨é‹...)
                    </label>
                    <input type="text" id="country-product" placeholder="è«‹å¡«å¯«ä»£è¡¨è©²åœ‹çš„1-2æ¨£å‰µæ„ç”¢å“">

                    <label for="product-meaning">
                        é€™å€‹ç”¢å“åœ¨è©²åœ‹çš„æ–‡åŒ–æ„ç¾©èˆ‡ç‰¹è‰²æ˜¯ä»€éº¼ï¼Ÿ
                    </label>
                    <textarea id="product-meaning" placeholder="ç ”ç©¶å®ƒçš„ç”±ä¾†ã€æè³ªã€åœ–æ¡ˆèˆ‡ç”¨é€”ï¼Œä¸¦è¨˜éŒ„ä¸‹ä¾†..."></textarea>
                </div>
                 <div class="task-card">
                    <h2>Step 3ï¼šæ”¤ä½è¨­è¨ˆè—åœ–èˆ‡åˆ†å·¥</h2>
                    <label for="stall-design">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6l-4 4L3.4 8.4C2.3 10.8 2.7 13.8 4.7 15.8c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l.6-.6c.4-.4.4-1 0-1.4z"/></svg>
                        æˆ‘å€‘çš„æ”¤ä½æµ·å ±èˆ‡ä½ˆç½®é¢¨æ ¼æ˜¯ä»€éº¼æ¨£å­ï¼Ÿ
                    </label>
                    <textarea id="stall-design" placeholder="è«‹ç”¨æ–‡å­—æè¿°æˆ–ç•«å‡ºè¨­è¨ˆè‰åœ–ï¼Œèªªæ˜ä½ å€‘çš„è¨­è¨ˆç†å¿µèˆ‡é¢¨æ ¼..."></textarea>

                    <label for="team-roles">
                        åœ˜éšŠä»»å‹™åˆ†å·¥è¡¨
                    </label>
                    <textarea id="team-roles" placeholder="å°‡æµ·å ±ç¹ªè£½ã€ç”¢å“è£½ä½œã€é“å…·æº–å‚™ç­‰å·¥ä½œï¼Œåˆ†é…çµ¦åˆé©çš„çµ„å“¡å§ï¼&#10;ä¾‹å¦‚ï¼š&#10;ç‹å°æ˜ï¼šæµ·å ±ä¸»è¦è¨­è¨ˆ&#10;é™³ç¾éº—ï¼šç”¢å“æ¨£å“è£½ä½œ"></textarea>
                </div>
            </div>
            
            <!-- Tab 4: å¸‚é›†æ—¥åæ€ -->
            <div id="tab4" class="tab-pane">
                <div class="task-card">
                    <h2>é—œæ–¼ã€Œå…¬å¹³è²¿æ˜“ã€èˆ‡ä¸–ç•Œå…¬æ°‘</h2>
                    <label for="reflection-fairtrade">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
                        ä¸Šå®Œã€Œå…¬å¹³è²¿æ˜“ã€é€™ä¸€èª²å¾Œï¼Œæˆ‘å°æ–¼ã€Œè²·æ±è¥¿ã€é€™ä»¶äº‹ï¼Œæœ‰æ²’æœ‰ä»€éº¼æ–°çš„æƒ³æ³•ï¼Ÿæˆ‘è¦ºå¾—ä¸€å€‹ã€Œä¸–ç•Œå…¬æ°‘ã€æ‡‰è©²å…·å‚™ä»€éº¼æ¨£çš„æ…‹åº¦ï¼Ÿ
                    </label>
                    <textarea id="reflection-fairtrade" placeholder="æ€è€ƒçœ‹çœ‹ï¼Œæˆ‘å€‘çš„æ¯ä¸€å€‹æ¶ˆè²»é¸æ“‡ï¼Œå¦‚ä½•å½±éŸ¿è‘—ä¸–ç•Œå¦ä¸€ç«¯çš„äºº..."></textarea>
                </div>
                <div class="task-card">
                    <h2>æˆ‘çš„æ”¶ç©«èˆ‡æˆé•·</h2>
                    <label for="reflection-harvest">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
                        åœ¨é€™æ¬¡ã€Œåœ‹éš›å‰µæ„å¸‚é›†ã€èª²ç¨‹ä¸­ï¼Œæˆ‘å°è±¡æœ€æ·±åˆ»çš„æ˜¯ä»€éº¼ï¼Ÿæˆ‘å­¸åˆ°äº†å“ªäº›é—œæ–¼è‡ºç£æˆ–å…¶ä»–åœ‹å®¶çš„äº‹ï¼Ÿ
                    </label>
                    <textarea id="reflection-harvest" placeholder="å¯ä»¥æ˜¯è£½ä½œéç¨‹ä¸­çš„è¶£äº‹ã€åŒå­¸æ”¤ä½çš„é©šå–œï¼Œæˆ–æ˜¯è‡ªå·±çš„æ–°ç™¼ç¾..."></textarea>
                </div>
                <div class="task-card">
                    <h2>åœ˜éšŠåˆä½œèˆ‡è‡ªæˆ‘è©•åƒ¹</h2>
                    <label for="reflection-teamwork">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"/></svg>
                        åœ¨å’Œçµ„å“¡ä¸€èµ·æº–å‚™çš„éç¨‹ä¸­ï¼Œæˆ‘è¦ºå¾—è‡ªå·±åšå¾—æœ€å¥½çš„åœ°æ–¹æ˜¯ä»€éº¼ï¼Ÿé‚„æœ‰å“ªäº›åœ°æ–¹å¯ä»¥å†é€²æ­¥ï¼Ÿ
                    </label>
                    <textarea id="reflection-teamwork" placeholder="å›æƒ³çœ‹çœ‹è‡ªå·±åœ¨åœ˜éšŠä¸­æ‰®æ¼”çš„è§’è‰²ï¼Œä»¥åŠå¦‚ä½•èˆ‡ä»–äººæºé€šåˆä½œ..."></textarea>
                </div>
            </div>
        </main>
        
        <div class="tab-content">
             <!-- æ­¥é©Ÿ 2: ä¿®æ”¹æŒ‰éˆ•ï¼Œç§»é™¤ onclick ä¸¦åŠ ä¸Š id -->
             <button id="download-pdf-button" class="action-button">ğŸ“„ ä¸‹è¼‰æˆ‘çš„å­¸ç¿’è­·ç…§ (PDF)</button>
        </div>
    </div>

    <script>
        // --- é ç±¤åˆ‡æ›åŠŸèƒ½ (ç¶­æŒä¸è®Š) ---
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabPanes = document.querySelectorAll('.tab-pane');

        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                tabButtons.forEach(btn => btn.classList.remove('active'));
                tabPanes.forEach(pane => pane.classList.remove('active'));
                button.classList.add('active');
                const tabId = button.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
            });
        });

        // --- æ­¥é©Ÿ 3: åŠ å…¥ PDF ç”Ÿæˆèˆ‡ä¸‹è¼‰çš„æ ¸å¿ƒåŠŸèƒ½ ---
        const downloadButton = document.getElementById('download-pdf-button');
        const passportContainer = document.getElementById('passport-content');

        async function generateAndDownloadPDF() {
            // æš«æ™‚ç¦ç”¨æŒ‰éˆ•ï¼Œé¿å…é‡è¤‡é»æ“Š
            downloadButton.disabled = true;
            downloadButton.innerText = 'PDF ç”¢ç”Ÿä¸­...';

            // ç‚ºäº†ç¢ºä¿ PDF åŒ…å«æ‰€æœ‰åˆ†é çš„å…§å®¹ (åŒ…å«ç¬¬ä¸€é )ï¼Œ
            // æˆ‘å€‘åœ¨ç”Ÿæˆå‰æš«æ™‚ç‚ºå®¹å™¨åŠ ä¸Šä¸€å€‹ classï¼Œè®“æ‰€æœ‰ .tab-pane å€å¡Šéƒ½é¡¯ç¤ºå‡ºä¾†
            passportContainer.classList.add('show-all-for-pdf');
            
            // ç²å–å­¸ç”Ÿå§“åä»¥ç”¨æ–¼æª”æ¡ˆå‘½å
            const studentName = document.getElementById('student-name').value || 'æœªå‘½å';
            const fileName = `åœ‹éš›å‰µæ„å¸‚é›†å­¸ç¿’è­·ç…§-${studentName}.pdf`;

            // è¨­å®š PDF é¸é …
            const options = {
                margin:       [0.5, 0.5, 0.5, 0.5], // ä¸Šã€å·¦ã€ä¸‹ã€å³ çš„é‚Šç•Œ (å–®ä½: è‹±å‹)
                filename:     fileName,
                image:        { type: 'jpeg', quality: 0.98 }, // åœ–ç‰‡å“è³ª
                html2canvas:  { scale: 2, useCORS: true }, // æé«˜è§£æåº¦
                jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' } // A4 ç›´å¼
            };

            try {
                // ä½¿ç”¨ html2pdf ç”¢ç”Ÿä¸¦å„²å­˜ PDF
                await html2pdf().from(passportContainer).set(options).save();
            } catch (error) {
                console.error("PDF ç”Ÿæˆå¤±æ•—:", error);
                alert("æŠ±æ­‰ï¼ŒPDF æª”æ¡ˆç”Ÿæˆå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚");
            } finally {
                // ç„¡è«–æˆåŠŸæˆ–å¤±æ•—ï¼Œéƒ½è¦ç§»é™¤è‡¨æ™‚æ¨£å¼ï¼Œæ¢å¾©æ­£å¸¸çš„é ç±¤æª¢è¦–
                passportContainer.classList.remove('show-all-for-pdf');

                // æ¢å¾©æŒ‰éˆ•ç‹€æ…‹
                downloadButton.disabled = false;
                downloadButton.innerText = 'ğŸ“„ ä¸‹è¼‰æˆ‘çš„å­¸ç¿’è­·ç…§ (PDF)';
            }
        }

        // ç‚ºæŒ‰éˆ•ç¶å®šé»æ“Šäº‹ä»¶
        downloadButton.addEventListener('click', generateAndDownloadPDF);
    </script>

</body>
</html>